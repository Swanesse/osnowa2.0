<div class="header-side-container">
  <div class="main-header">
    <h1>Dodaj punkt</h1>
    <button mat-icon-button routerLink="/home">
      <mat-icon>close</mat-icon>
    </button>

  </div>

  <div class="bottom-line"></div>
</div>

<div class="detail-side-container">
  <form [formGroup]="pointForm" (ngSubmit)="onSubmit()">


    <!--Pierwsze wpisanie współrzędnych-->
    <ng-template #noCoordinate>
      <div class="form_element">
        <label>Współrzędne w układzie WGS84 lub 2000</label>
        <mat-form-field class="short-width mat-form-field-invalid" hintLabel="(np. 50.068436 lub 5548589.65)">
          <input class="mat-form-field-invalid" [textMask]="{mask: mask, guide: false}" type="text" name="X" id="X"
                 placeholder="X" matInput [(ngModel)]="X"
                 formControlName="X" (blur)="transformCoordinates(); ifXisBlur()" (click)="outputCoordinateX()"
                 required>
          <mat-error *ngIf="pointForm.get('X').errors && pointForm.get('X').errors['required']">Pole wymagane</mat-error>
          <mat-error *ngIf="pointForm.get('X').errors && pointForm.get('X').errors['unproper']">Współrzędna X jest niepoprawna</mat-error>
        </mat-form-field>

        <mat-form-field class="short-width right" hintLabel="(np. 19.921046 lub 7422760.20)">
          <input [textMask]="{mask: mask, guide: false}" type="text" name="Y" id="Y"
                 placeholder="Y" matInput [(ngModel)]="Y"
                 formControlName="Y" (blur)="transformCoordinates(); ifYisBlur()" (click)="outputCoordinateY()"
                 required>
          <mat-error *ngIf="pointForm.get('Y').errors && pointForm.get('Y').errors['required']">Pole wymagane</mat-error>
          <mat-error *ngIf="pointForm.get('Y').errors && pointForm.get('Y').errors['unproper']">Współrzędna Y jest niepoprawna</mat-error>

        </mat-form-field>

      </div>
    </ng-template>

    <!--Ponowne wybranie współrzędnych-->
    <ng-container
      *ngIf="validX === '1'&& validY ==='1' && pointForm.get('X').valid && pointForm.get('Y').valid && isXBlur && isYBlur; else noCoordinate">
      <div class="form_element">
        <label>Współrzędne w układzie WGS84:</label>
        <mat-form-field class="short-width" hintLabel="(np. 50.068436)">
          <input [textMask]="{mask: mask, guide: false}" type="text" name="X_WGS84" id="X_WGS84"
                 placeholder="X" matInput [(ngModel)]="point.X_WGS84"
                 formControlName="X_WGS84" required>
        </mat-form-field>
        <mat-form-field class="short-width right" hintLabel="(np. 19.921046)">
          <input [textMask]="{mask: mask, guide: false}" type="text" name="X_WGS84" id="Y_WGS84"
                 placeholder="Y" matInput [(ngModel)]="point.Y_WGS84"
                 formControlName="Y_WGS84" required>


        </mat-form-field>
      </div>

      <div class="form_element">

        <label>Współrzędne w układzie 2000:</label>
        <mat-form-field class="short-width" hintLabel="(np. 5548589.65)">
          <input [textMask]="{mask: mask, guide: false}" type="text" name="X_2000" id="X_2000"
                 placeholder="X" matInput [(ngModel)]="X_2000"
                 formControlName="X_2000" >
        </mat-form-field>
        <mat-form-field class="short-width right" hintLabel="(np. 7422760.20)">
          <input [textMask]="{mask: mask, guide: false}" type="text" name="X_2000" id="Y_2000"
                 placeholder="Y" matInput [(ngModel)]="Y_2000"
                 formControlName="Y_2000" >

        </mat-form-field>
      </div>
    </ng-container>


    <!--Wybór lokalizacji-->
    <mat-hint class="localization">
      <div>
        <a href="">Wybierz z mapy</a>

      </div>
      <a href=""> <i class="material-icons">location_searching</i>
      </a>
    </mat-hint>

    <div class="radio-group-container" id="typOsnowy">
      <label>Typ osnowy:</label>
    </div>
    <div class="radio-button-container">
      <mat-radio-group [(ngModel)]="point.typOsnowy" formControlName="typOsnowy" aria-labelledby="typOsnowy">
        <mat-radio-button value="pozioma">Pozioma</mat-radio-button>
        <mat-radio-button value="wysokościowa">Wysokościowa</mat-radio-button>
        <mat-radio-button value="dwufunkcyjna">Dwufunkcyjna</mat-radio-button>
      </mat-radio-group>
    </div>

    <div class="radio-group-container">
      <label id="klasa">Klasa:</label>
    </div>
    <div class="radio-button-container">
      <mat-radio-group [(ngModel)]="point.klasa" formControlName="klasa" aria-labelledby="klasa">
        <mat-radio-button value="1">1</mat-radio-button>
        <mat-radio-button value="2">2</mat-radio-button>
        <mat-radio-button value="3">3</mat-radio-button>
      </mat-radio-group>
    </div>

    <mat-form-field class="full-width">
      <input type="text" placeholder="Numer katalogowy" [(ngModel)]="point.numerKatalogowy" matInput
             formControlName="numerKatalogowy">
    </mat-form-field>

    <mat-form-field class="full-width">

      <input type="text" placeholder="Województwo" [(ngModel)]="point.woj" matInput formControlName="woj">
    </mat-form-field>

    <mat-form-field class="full-width">
      <input type="text" placeholder="Powiat" matInput [(ngModel)]="point.powiat" formControlName="powiat">
    </mat-form-field>

    <mat-form-field class="full-width">
      <input type="text" placeholder="Gmina" matInput [(ngModel)]="point.gmina" formControlName="gmina">
    </mat-form-field>

    <mat-form-field class="full-width">
      <input type="text" placeholder="Współrzędne (lokalne)" matInput [(ngModel)]="point.X_local"
             formControlName="X_local">
    </mat-form-field>

    <mat-form-field class="full-width">
      <input type="text" placeholder="H (AMSTERDAM)" matInput [(ngModel)]="point.hAmsterdam"
             formControlName="hAmsterdam">
    </mat-form-field>

    <mat-form-field class="full-width">
      <input type="text" placeholder="H (KRONSZTADT 86)" matInput [(ngModel)]="point.HKronsztadt"
             formControlName="HKronsztadt">
    </mat-form-field>

    <mat-form-field class="full-width">
      <input type="text" placeholder="Stabilizacja" matInput [(ngModel)]="point.stabilizacja"
             formControlName="stabilizacja">
    </mat-form-field>

    <mat-form-field class="full-width">
      <input type="text" placeholder="Typ znaku" matInput [(ngModel)]="point.typZnaku" formControlName="typZnaku">
    </mat-form-field>

    <mat-form-field class="full-width">
      <input type="text" placeholder="Punkt znaleziono" matInput [(ngModel)]="point.znaleziono"
             formControlName="znaleziono">
    </mat-form-field>

    <mat-form-field class="full-width">
      <input type="text" placeholder="Stabilizacja" matInput [(ngModel)]="point.stabilizacja"
             formControlName="stabilizacja">
    </mat-form-field>

    <mat-form-field class="full-width">
      <input type="text" placeholder="Typ znaku" matInput [(ngModel)]="point.typZnaku" formControlName="typZnaku">
    </mat-form-field>

    <mat-form-field class="full-width">
      <input type="text" placeholder="Punkt znaleziono" matInput [(ngModel)]="point.znaleziono"
             formControlName="znaleziono">
    </mat-form-field>

    <button type="submit" mat-raised-button class="main-button">Zapisz</button>
  </form>
</div>
